swagger: "2.0"
info:
  title: Alfresco SCIM v2 API
  description: |
    System for Cross-domain Identity Management (SCIM) v2.0 API implementation for Alfresco.
    
    This API provides endpoints for managing users, groups, and other identity resources in Alfresco
    using the SCIM 2.0 standard. It supports CRUD operations on users and groups, along with
    discovery endpoints for service configuration, resource types, and schemas.
    
    **Note:** These endpoints are available in Alfresco Enterprise 25.3.x and newer versions.
    
    ## Features
    - User management (CRUD operations)
    - Group management (CRUD operations)
    - SCIM filtering and pagination
    - Service Provider Configuration
    - Resource Type discovery
    - Schema introspection
    
    ## Limitations
    - Maximum page size limit enforced
    - Limited filtering support
  version: "1"

basePath: /alfresco/api/-default-/public/scim/v2

consumes:
  - application/scim+json
  - application/json

produces:
  - application/scim+json
  - application/json

securityDefinitions:
  basicAuth:
    type: basic
    description: HTTP Basic Authentication

security:
  - basicAuth: []

parameters:
  UserId:
    name: id
    in: path
    required: true
    type: string
    description: The unique identifier of the user
    x-example: "2819c223-7f76-453a-919d-413861904646"

  GroupId:
    name: id
    in: path
    required: true
    type: string
    description: The unique identifier of the group
    x-example: "e9e30dba-f08f-4109-8486-d5c6a331660a"

  ResourceTypeId:
    name: id
    in: path
    required: true
    type: string
    enum: [User, Group, ServiceProviderConfig, ResourceType, Schema]
    description: The resource type identifier
    x-example: "User"

  SchemaId:
    name: id
    in: path
    required: true
    type: string
    description: The schema identifier (URN)
    x-example: "urn:ietf:params:scim:schemas:core:2.0:User"

  StartIndex:
    name: startIndex
    in: query
    type: integer
    minimum: 1
    default: 1
    description: The 1-based index of the first query result
    x-example: 1

  Count:
    name: count
    in: query
    type: integer
    minimum: 0
    maximum: 1000
    default: 1000
    description: Non-negative integer specifying desired maximum number of query results per page
    x-example: 10

  Filter:
    name: filter
    in: query
    type: string
    description: |
      SCIM filter expression. Limited support for specific attributes.
      
      ## Supported Filters
      - Users: `userName eq "value"`
      - Groups: `displayName eq "value"`
      
      ## Examples
      - `userName eq "john.doe"`
      - `displayName eq "Admin"`
    x-example: 'userName eq "john.doe"'

  SortBy:
    name: sortBy
    in: query
    type: string
    description: |
      Attribute path for sorting results. Only single attribute sorting is supported.
      
      ## Supported Sort Attributes
      - Users: userName, name.givenName, name.familyName
      - Groups: displayName
    x-example: "userName"

  SortOrder:
    name: sortOrder
    in: query
    type: string
    enum: [ascending, descending]
    default: ascending
    description: Sort order for results
    x-example: "ascending"

  Attributes:
    name: attributes
    in: query
    type: string
    description: |
      Comma-separated list of attribute names to include in the response.
      When specified, only the listed attributes are returned.
      
      ## Examples
      - `userName,name.givenName,emails`
      - `displayName,members.value`
    x-example: "userName,name.givenName,emails"

  ExcludedAttributes:
    name: excludedAttributes
    in: query
    type: string
    description: |
      Comma-separated list of attribute names to exclude from the response.
      When specified, all attributes except the listed ones are returned.
      
      ## Examples
      - `emails,title`
      - `name.givenName`
    x-example: "password,meta.version"

paths:
  /Users:
    get:
      summary: List Users
      description: |
        Retrieve a paginated list of users. Supports filtering, sorting, and attribute selection.
        
        ## Filtering
        - Supports equality filtering by username using SCIM filter expressions
        - Example: `filter=userName eq "john.doe"`
        
        ## Sorting
        - Supports sorting by a single attribute
        - Default sort order is ascending
        
        ## Limitations
        - Maximum page size is configurable (default: 1000)
        - Only username filtering is currently supported
      operationId: getUsers
      tags:
        - Users
      parameters:
        - $ref: '#/parameters/StartIndex'
        - $ref: '#/parameters/Count'
        - $ref: '#/parameters/Filter'
        - $ref: '#/parameters/SortBy'
        - $ref: '#/parameters/SortOrder'
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Users retrieved successfully
          schema:
            $ref: '#/definitions/UserListResponse'
          examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:api:messages:2.0:ListResponse"
              totalResults: 1
              startIndex: 1
              itemsPerPage: 2
              Resources:
                - schemas:
                    - "urn:ietf:params:scim:schemas:core:2.0:User"
                  id: "2819c223-7f76-453a-919d-413861904646"
                  userName: "john.doe"
                  name:
                    givenName: "John"
                    familyName: "Doe"
                  meta:
                    resourceType: "User"
                    version: "1"
                    location: "http://localhost:8080/alfresco/api/-default-/public/scim/v2/Users"
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        500:
          $ref: '#/responses/InternalServerError'

    post:
      summary: Create User
      description: |
        Create a new user in the system.
        
        ## Validation Rules
        - Username is required and must be unique
        - Username cannot exceed 100 characters
        - Username cannot start with reserved prefixes (GROUP_, ROLE_, etc.)
      operationId: createUser
      tags:
        - Users
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/User'
          x-examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:schemas:core:2.0:User"
              userName: "john.doe"
              name:
                givenName: "John"
                familyName: "Doe"
              emails:
                - value: "john.doe@example.com"
                  primary: true
              active: true
      responses:
        201:
          description: User created successfully
          schema:
            $ref: '#/definitions/User'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        409:
          $ref: '#/responses/Conflict'
        500:
          $ref: '#/responses/InternalServerError'

  /Users/{id}:
    get:
      summary: Get User
      description: Retrieve a specific user by ID .
      operationId: getUser
      tags:
        - Users
      parameters:
        - $ref: '#/parameters/UserId'
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: User retrieved successfully
          schema:
            $ref: '#/definitions/User'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

    put:
      summary: Update User (Replace)
      description: |
        Replace a user's attributes entirely. This is a complete replacement operation.
        
        ## Behavior
        - All mutable attributes are replaced with provided values
        - Missing mutable attributes are cleared
        - Immutable attributes (like userName) if provided throws exception
        - Read-Only attributes (like active) if provided is ignored
      operationId: replaceUser
      tags:
        - Users
      parameters:
        - $ref: '#/parameters/UserId'
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        200:
          description: User updated successfully
          schema:
            $ref: '#/definitions/User'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

    patch:
      summary: Update User (Partial)
      description: |
        Partially update a user using SCIM PATCH operations.
        
        ## Supported Operations
        - add: Add values to attributes
        - remove: Remove values from attributes
        - replace: Replace attribute values
        
        ## Path Targeting
        - Simple attributes: `name.givenName`
        - Complex attributes: `emails[primary eq true].value`
      operationId: patchUser
      tags:
        - Users
      parameters:
        - $ref: '#/parameters/UserId'
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/PatchRequest'
          x-examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:api:messages:2.0:PatchOp"
              Operations:
                - op: "replace"
                  path: "name.givenName"
                  value: "Johnny"
                - op: "add"
                  path: "emails"
                  value:
                    - value: "johnny.doe@example.com"
      responses:
        200:
          description: User updated successfully
          schema:
            $ref: '#/definitions/User'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

    delete:
      summary: Delete User
      description: |
        Delete a user from the system.
        
        ## Behavior
        - User is permanently removed
        - Associated group memberships are cleaned up
        - Cannot be undone
      operationId: deleteUser
      tags:
        - Users
      parameters:
        - $ref: '#/parameters/UserId'
      responses:
        204:
          description: User deleted successfully
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

  /Users/.search:
    post:
      summary: Search Users
      description: |
        Search users using a POST request with search criteria in the request body.
        This endpoint provides the same functionality as GET /Users but allows for
        more complex search criteria to be passed in the request body.
        
        ## Filtering
        - Supports equality filtering by username using SCIM filter expressions
        - Example: `filter: "userName eq "john.doe"`
        
        ## Sorting
        - Supports sorting by a single attribute
        - Default sort order is ascending
        
        ## Limitations
        - Maximum page size is configurable (default: 1000)
        - Only username filtering is currently supported
      operationId: searchUsers
      tags:
        - Users
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/SearchRequest'
          x-examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
              filter: 'userName eq "john"'
              sortBy: "userName"
              sortOrder: "ascending"
              startIndex: 1
              count: 10
      responses:
        200:
          description: Search completed successfully
          schema:
            $ref: '#/definitions/UserListResponse'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        500:
          $ref: '#/responses/InternalServerError'

  /Groups:
    get:
      summary: List Groups
      description: |
        Retrieve a paginated list of groups. Supports filtering, sorting, and attribute selection.
        
        ## Filtering
        - Supports filtering by displayName using SCIM filter expressions
        - Example: `filter=displayName eq "Administrators"`
        
        ## Sorting
        - Supports sorting by displayName
        - Default sort order is ascending
        
        ## Member References
        - Member $ref URLs are automatically populated with base URI
        - Members include type information (User/Group)
      operationId: getGroups
      tags:
        - Groups
      parameters:
        - $ref: '#/parameters/StartIndex'
        - $ref: '#/parameters/Count'
        - $ref: '#/parameters/Filter'
        - $ref: '#/parameters/SortBy'
        - $ref: '#/parameters/SortOrder'
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Groups retrieved successfully
          schema:
            $ref: '#/definitions/GroupListResponse'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        500:
          $ref: '#/responses/InternalServerError'

    post:
      summary: Create Group
      description: |
        Create a new group in the system.
        
        ## Validation Rules
        - displayName is required and must be unique
        - Members must reference existing users or groups by ID
        - Member IDs are validated to ensure referenced resources exist
      operationId: createGroup
      tags:
        - Groups
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Group'
          x-examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:schemas:core:2.0:Group"
              displayName: "Administrators"
              members:
                - value: "user-id-123"
                  type: "User"
                - value: "group-id-456"
                  type: "Group"
      responses:
        201:
          description: Group created successfully
          schema:
            $ref: '#/definitions/Group'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        409:
          $ref: '#/responses/Conflict'
        500:
          $ref: '#/responses/InternalServerError'

  /Groups/{id}:
    get:
      summary: Get Group
      description: |
        Retrieve a specific group by ID with optional attribute filtering.
        
        ## Member Information
        - Members include full reference URLs
        - Display names are populated for members
        - Type information indicates User or Group membership
      operationId: getGroup
      tags:
        - Groups
      parameters:
        - $ref: '#/parameters/GroupId'
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Group retrieved successfully
          schema:
            $ref: '#/definitions/Group'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

    put:
      summary: Update Group (Replace)
      description: |
        Replace a group's attributes entirely. This is a complete replacement operation.
        
        ## Behavior
        - All mutable attributes are replaced with provided values
        - Missing mutable attributes are cleared
        - Member list is completely replaced
        - Immutable attributes (like id) are ignored if provided
      operationId: replaceGroup
      tags:
        - Groups
      parameters:
        - $ref: '#/parameters/GroupId'
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/Group'
      responses:
        200:
          description: Group updated successfully
          schema:
            $ref: '#/definitions/Group'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

    patch:
      summary: Update Group (Partial)
      description: |
        Partially update a group using SCIM PATCH operations.
        
        ## Supported Operations
        - add: Add members to the group
        - remove: Remove members from the group
        - replace: Replace group attributes or member list
        
        ## Special Considerations
        - displayName cannot be removed (required attribute)
        - Member operations support adding/removing individual members
      operationId: patchGroup
      tags:
        - Groups
      parameters:
        - $ref: '#/parameters/GroupId'
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/PatchRequest'
          x-examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:api:messages:2.0:PatchOp"
              Operations:
                - op: "add"
                  path: "members"
                  value:
                    - value: "user-id-789"
                      type: "User"
                - op: "remove"
                  path: "members[value eq \"user-id-123\"]"
      responses:
        200:
          description: Group updated successfully
          schema:
            $ref: '#/definitions/Group'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

    delete:
      summary: Delete Group
      description: |
        Delete a group from the system.
        
        ## Behavior
        - Group is permanently removed
        - Member associations are cleaned up
        - Cannot be undone
      operationId: deleteGroup
      tags:
        - Groups
      parameters:
        - $ref: '#/parameters/GroupId'
      responses:
        204:
          description: Group deleted successfully
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

  /Groups/.search:
    post:
      summary: Search Groups
      description: |
        Search groups using a POST request with search criteria in the request body.
        This endpoint provides the same functionality as GET /Groups but allows for
        more complex search criteria to be passed in the request body.
      operationId: searchGroups
      tags:
        - Groups
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/SearchRequest'
          x-examples:
            application/scim+json:
              schemas:
                - "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
              filter: 'displayName co "Admin"'
              sortBy: "displayName"
              sortOrder: "ascending"
              startIndex: 1
              count: 10
      responses:
        200:
          description: Search completed successfully
          schema:
            $ref: '#/definitions/GroupListResponse'
        400:
          $ref: '#/responses/BadRequest'
        401:
          $ref: '#/responses/Unauthorized'
        500:
          $ref: '#/responses/InternalServerError'

  /ServiceProviderConfig:
    get:
      summary: Get Service Provider Configuration
      description: |
        Retrieve the SCIM service provider configuration. This endpoint provides
        information about the capabilities and configuration of the SCIM service.
        
        ## Information Provided
        - Supported authentication schemes
        - Supported operations (PATCH, bulk, filtering, etc.)
        - Maximum page size and other limits
        - Supported features and extensions
      operationId: getServiceProviderConfig
      tags:
        - Discovery
      parameters:
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Service provider configuration retrieved successfully
          schema:
            $ref: '#/definitions/ServiceProviderConfig'
        500:
          $ref: '#/responses/InternalServerError'

  /ResourceTypes:
    get:
      summary: List Resource Types
      description: |
        Retrieve all available resource types. Resource types define the
        structure and capabilities of different SCIM resources.
        
        ## Available Resource Types
        - User: Core user resource type
        - Group: Core group resource type
        - ServiceProviderConfig: Configuration resource type
        - ResourceType: Meta resource type
        - Schema: Schema definition resource type
      operationId: getResourceTypes
      tags:
        - Discovery
      parameters:
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Resource types retrieved successfully
          schema:
            $ref: '#/definitions/ResourceTypeListResponse'
        500:
          $ref: '#/responses/InternalServerError'

  /ResourceTypes/{id}:
    get:
      summary: Get Resource Type
      description: Retrieve a specific resource type by ID.
      operationId: getResourceType
      tags:
        - Discovery
      parameters:
        - $ref: '#/parameters/ResourceTypeId'
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Resource type retrieved successfully
          schema:
            $ref: '#/definitions/ResourceType'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

  /Schemas:
    get:
      summary: List Schemas
      description: |
        Retrieve all available schemas. Schemas define the structure and
        validation rules for SCIM resources and their attributes.
        
        ## Available Schemas
        - User schema: Defines user attributes and structure
        - Group schema: Defines group attributes and structure
        - ServiceProviderConfig schema: Configuration schema
        - ResourceType schema: Resource type definition schema
        - Schema schema: Meta-schema for schema definitions
      operationId: getSchemas
      tags:
        - Discovery
      parameters:
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Schemas retrieved successfully
          schema:
            $ref: '#/definitions/SchemaListResponse'
        401:
          $ref: '#/responses/Unauthorized'
        500:
          $ref: '#/responses/InternalServerError'

  /Schemas/{id}:
    get:
      summary: Get Schema
      description: Retrieve a specific schema by ID (URN).
      operationId: getSchema
      tags:
        - Discovery
      parameters:
        - $ref: '#/parameters/SchemaId'
        - $ref: '#/parameters/Attributes'
        - $ref: '#/parameters/ExcludedAttributes'
      responses:
        200:
          description: Schema retrieved successfully
          schema:
            $ref: '#/definitions/Schema'
        401:
          $ref: '#/responses/Unauthorized'
        404:
          $ref: '#/responses/NotFound'
        500:
          $ref: '#/responses/InternalServerError'

responses:
  BadRequest:
    description: Bad Request - The request is unparseable, syntactically incorrect, or violates schema
    schema:
      $ref: '#/definitions/Error'
    examples:
      application/scim+json:
        schemas:
          - "urn:ietf:params:scim:api:messages:2.0:Error"
        status: 400
        scimType: "mutability"
        detail: "The request is unparseable, syntactically incorrect, or violates schema."

  Unauthorized:
    description: Unauthorized - Authentication failure
    schema:
      $ref: '#/definitions/Error'
    examples:
      application/scim+json:
        schemas:
          - "urn:ietf:params:scim:api:messages:2.0:Error"
        status: 401
        detail: "Authorization failure. The authorization header is invalid or missing."

  NotFound:
    description: Not Found - Specified resource does not exist
    schema:
      $ref: '#/definitions/Error'
    examples:
      application/scim+json:
        schemas:
          - "urn:ietf:params:scim:api:messages:2.0:Error"
        status: 404
        detail: "Resource not found."

  Conflict:
    description: Conflict - The specified resource already exists
    schema:
      $ref: '#/definitions/Error'
    examples:
      application/scim+json:
        schemas:
          - "urn:ietf:params:scim:api:messages:2.0:Error"
        status: 409
        detail: "Resource already exists."

  InternalServerError:
    description: Internal Server Error - An internal error occurred
    schema:
      $ref: '#/definitions/Error'
    examples:
      application/scim+json:
        schemas:
          - "urn:ietf:params:scim:api:messages:2.0:Error"
        status: 500
        detail: "Internal server error."

definitions:
  User:
    type: object
    required:
      - userName
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:schemas:core:2.0:User"
      id:
        type: string
        readOnly: true
        description: Unique identifier for the user
        example: "2819c223-7f76-453a-919d-413861904646"
      externalId:
        type: string
        description: External unique identifier for the user
        example: "external-123"
      userName:
        type: string
        description: Unique identifier, typically the user's login name
        maxLength: 100
        example: "john.doe"
      name:
        type: object
        properties:
          familyName:
            type: string
            description: Family name of the user, or last name
            example: "Doe"
          givenName:
            type: string
            description: Given name of the user, or first name
            example: "John"
      displayName:
        type: string
        description: Name of the user(Given Name and Family Name with space)
        example: "John Doe"
      title:
        type: string
        description: Title of the user
        example: "Software Engineer"
      active:
        type: boolean
        description: Whether the user account is active
        default: true
        example: true
      emails:
        type: array
        items:
          type: object
          properties:
            value:
              type: string
              format: email
              description: Email address
              example: "john.doe@example.com"
            type:
              type: string
              description: Type of email address
              example: "work"
              enum: [work]
              readOnly: true
            primary:
              type: boolean
              description: Whether this is the primary email
              example: true
      phoneNumbers:
        type: array
        items:
          type: object
          properties:
            value:
              type: string
              description: Phone number
              example: "+1-555-123-4567"
            type:
              type: string
              description: Phone type (work, mobile)
              example: "work"
      groups:
        type: array
        readOnly: true
        items:
          type: object
          properties:
            value:
              type: string
              description: Identifier of the group
              example: "e9e30dba-f08f-4109-8486-d5c6a331660a"
            $ref:
              type: string
              format: uri
              description: URI of the group resource
              example: "https://example.com/v2/Groups/e9e30dba-f08f-4109-8486-d5c6a331660a"
            display:
              type: string
              description: Human-readable name of the group
              example: "Tour Guides"
            type:
              type: string
              description: Type of group membership
              example: "direct"
      meta:
        $ref: '#/definitions/Meta'

  Group:
    type: object
    required:
      - schemas
      - displayName
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:schemas:core:2.0:Group"
      id:
        type: string
        readOnly: true
        description: Unique identifier for the group
        example: "e9e30dba-f08f-4109-8486-d5c6a331660a"
      externalId:
        type: string
        description: External unique identifier for the group
        example: "external-group-123"
      displayName:
        type: string
        description: Human-readable name for the group
        example: "Tour Guides"
      members:
        type: array
        description: List of members belonging to the group
        items:
          type: object
          required:
            - value
          properties:
            value:
              type: string
              description: Identifier of the member
              example: "2819c223-7f76-453a-919d-413861904646"
            $ref:
              type: string
              format: uri
              readOnly: true
              description: URI of the member resource
              example: "https://example.com/v2/Users/2819c223-7f76-453a-919d-413861904646"
            type:
              type: string
              description: Type of member
              enum: [User, Group]
              example: "User"
            display:
              type: string
              readOnly: true
              description: Human-readable name of the member
              example: "John Doe"
      meta:
        $ref: '#/definitions/Meta'

  Meta:
    type: object
    readOnly: true
    description: Resource metadata
    properties:
      resourceType:
        type: string
        description: Name of the resource type
        example: "User"
      location:
        type: string
        format: uri
        description: URI of the resource
        example: "https://example.com/v2/Users/2819c223-7f76-453a-919d-413861904646"
      version:
        type: string
        description: Version of the resource being returned
        example: "1"

  UserListResponse:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:ListResponse"
      totalResults:
        type: integer
        description: Total number of results matching the query
        example: 2
      startIndex:
        type: integer
        description: 1-based index of the first query result
        example: 1
      itemsPerPage:
        type: integer
        description: Number of resources returned in this response
        example: 2
      Resources:
        type: array
        items:
          $ref: '#/definitions/User'

  GroupListResponse:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:ListResponse"
      totalResults:
        type: integer
        description: Total number of results matching the query
        example: 1
      startIndex:
        type: integer
        description: 1-based index of the first query result
        example: 1
      itemsPerPage:
        type: integer
        description: Number of resources returned in this response
        example: 1
      Resources:
        type: array
        items:
          $ref: '#/definitions/Group'

  PatchRequest:
    type: object
    required:
      - schemas
      - Operations
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:PatchOp"
      Operations:
        type: array
        items:
          type: object
          required:
            - op
          properties:
            op:
              type: string
              enum: [add, remove, replace]
              description: The operation to be performed
              example: "replace"
            path:
              type: string
              description: Attribute path describing the target of the operation
              example: "name.givenName"
            value:
              description: Value for the operation
              example: "Johnny"

  SearchRequest:
    type: object
    required:
      - schemas
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:SearchRequest"
      attributes:
        type: array
        items:
          type: string
        description: Multi-valued list of strings specifying the names of resource attributes to return
        example: ["userName", "name", "emails"]
      excludedAttributes:
        type: array
        items:
          type: string
        description: Multi-valued list of strings specifying the names of resource attributes to exclude
        example: ["password"]
      filter:
        type: string
        description: Filter expression used to request a subset of resources
        example: 'userName eq "J"'
      sortBy:
        type: string
        description: Specifies the attribute whose value SHALL be used to order the returned responses
        example: "userName"
      sortOrder:
        type: string
        enum: [ascending, descending]
        description: Order in which the sortBy parameter is applied
        example: "ascending"
      startIndex:
        type: integer
        minimum: 1
        description: 1-based index of the first query result
        example: 1
      count:
        type: integer
        minimum: 0
        description: Specifies the desired maximum number of query results per page
        example: 10

  ServiceProviderConfig:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:schemas:core:2.0:ServiceProviderConfig"
      documentationUri:
        type: string
        format: uri
        description: HTTP-addressable URL pointing to the service provider's documentation
        example: "https://support.hyland.com/p/alfresco"
      patch:
        type: object
        properties:
          supported:
            type: boolean
            description: Boolean value specifying whether PATCH is supported
            example: true
      bulk:
        type: object
        properties:
          supported:
            type: boolean
            description: Boolean value specifying whether bulk operations are supported
            example: false
          maxOperations:
            type: integer
            description: Integer value specifying the maximum number of operations
            example: 0
          maxPayloadSize:
            type: integer
            description: Integer value specifying the maximum payload size in bytes
            example: 0
      filter:
        type: object
        properties:
          supported:
            type: boolean
            description: Boolean value specifying whether filtering is supported
            example: true
          maxResults:
            type: integer
            description: Integer value specifying the maximum number of resources returned
            example: 1000
      changePassword:
        type: object
        properties:
          supported:
            type: boolean
            description: Boolean value specifying whether password change is supported
            example: false
      sort:
        type: object
        properties:
          supported:
            type: boolean
            description: Boolean value specifying whether sorting is supported
            example: true
      etag:
        type: object
        properties:
          supported:
            type: boolean
            description: Boolean value specifying whether ETags are supported
            example: false
      authenticationSchemes:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
              description: Common authentication scheme name
              example: "HTTP Basic"
            description:
              type: string
              description: Description of the authentication scheme
              example: "Authentication via HTTP Basic"
            specUri:
              type: string
              format: uri
              description: HTTP-addressable URL pointing to the specification
              example: "http://www.rfc-editor.org/info/rfc2617"
            documentationUri:
              type: string
              format: uri
              description: HTTP-addressable URL pointing to the documentation
              example: "http://example.com/help/httpBasic.html"
            type:
              type: string
              description: Authentication scheme type
              example: "httpbasic"
            primary:
              type: boolean
              description: Boolean value indicating the primary authentication scheme
              example: true
      meta:
        $ref: '#/definitions/Meta'

  ResourceType:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:schemas:core:2.0:ResourceType"
      id:
        type: string
        description: Resource type identifier
        example: "User"
      name:
        type: string
        description: Resource type name
        example: "User"
      endpoint:
        type: string
        description: Resource type's HTTP-addressable endpoint
        example: "Users"
      description:
        type: string
        description: Resource type description
        example: "User"
      schema:
        type: string
        description: Resource type's base schema URI
        example: "urn:ietf:params:scim:schemas:core:2.0:User"
      meta:
        $ref: '#/definitions/Meta'

  ResourceTypeListResponse:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:ListResponse"
      totalResults:
        type: integer
        description: Total number of resource types
        example: 2
      startIndex:
        type: integer
        description: 1-based index of the first result
        example: 1
      itemsPerPage:
        type: integer
        description: Number of resource types returned
        example: 2
      Resources:
        type: array
        items:
          $ref: '#/definitions/ResourceType'

  Schema:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:schemas:core:2.0:Schema"
      id:
        type: string
        description: Schema's unique identifier
        example: "urn:ietf:params:scim:schemas:core:2.0:User"
      name:
        type: string
        description: Schema's human-readable name
        example: "User"
      description:
        type: string
        description: Schema's human-readable description
        example: "User Account"
      attributes:
        type: array
        items:
          type: object
          properties:
            name:
              type: string
              description: Attribute name
              example: "userName"
            type:
              type: string
              enum: [string, boolean, decimal, integer, dateTime, reference, complex]
              description: Attribute data type
              example: "string"
            multiValued:
              type: boolean
              description: Boolean indicating whether the attribute is multi-valued
              example: false
            description:
              type: string
              description: Human-readable description of the attribute
              example: "Unique identifier for the User"
            required:
              type: boolean
              description: Boolean indicating whether the attribute is required
              example: true
            caseExact:
              type: boolean
              description: Boolean indicating whether the attribute is case sensitive
              example: false
            mutability:
              type: string
              enum: [readOnly, readWrite, immutable, writeOnly]
              description: Indicates whether and how the attribute may be modified
              example: "readWrite"
            returned:
              type: string
              enum: [always, never, default, request]
              description: Indicates when an attribute is returned in a response
              example: "default"
            uniqueness:
              type: string
              enum: [none, server, global]
              description: Indicates whether a value may be duplicated
              example: "server"
            referenceTypes:
              type: array
              items:
                type: string
              description: Used for reference attributes to specify allowable resource types
              example: ["User", "Group"]
            canonicalValues:
              type: array
              items:
                type: string
              description: Collection of suggested canonical values
              example: ["work", "home", "other"]
            subAttributes:
              type: array
              description: Used for complex attributes to define sub-attributes
              items:
                type: object
      meta:
        $ref: '#/definitions/Meta'

  SchemaListResponse:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:ListResponse"
      totalResults:
        type: integer
        description: Total number of schemas
        example: 2
      startIndex:
        type: integer
        description: 1-based index of the first result
        example: 1
      itemsPerPage:
        type: integer
        description: Number of schemas returned
        example: 2
      Resources:
        type: array
        items:
          $ref: '#/definitions/Schema'

  Error:
    type: object
    properties:
      schemas:
        type: array
        items:
          type: string
        example:
          - "urn:ietf:params:scim:api:messages:2.0:Error"
      status:
        type: integer
        description: HTTP status code
        example: 400
      scimType:
        type: string
        description: SCIM detail error keyword
        enum:
          - invalidFilter
          - tooMany
          - uniqueness
          - mutability
          - invalidSyntax
          - invalidPath
          - noTarget
          - invalidValue
        example: "mutability"
      detail:
        type: string
        description: Human-readable message describing the failure
        example: "The request is unparseable, syntactically incorrect, or violates schema."

tags:
  - name: Users
    description: User resource management operations
  - name: Groups
    description: Group resource management operations
  - name: Discovery
    description: Service discovery and schema introspection endpoints